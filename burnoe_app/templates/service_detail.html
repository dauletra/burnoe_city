{% extends "base.html" %}
{% load static crop_image pad_image %}

{% block title %}{{ advert.title }} - burnoe.kz{% endblock %}

{% block content %}
    <div class="" style="max-width: 650px">
        <!-- –£—Å–ª—É–≥–∏ - –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
        <div class="pl-2 mb-3">
            <a href="{% url 'service_list' %}" class="blood-color font-weight-bold normall">–£—Å–ª—É–≥–∏</a> &rarr;
            <a href="{% url 'service_list' %}?category={{ advert.category.id }}" class="normall text-black">{{ advert.category.name }}</a> &rarr;
            <span class="text-muted">{{ advert.id }}</span>
        </div>

        {% if advert.is_active %}
            <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ -->
            {% if advert.servicephoto_set.all.count > 0 %}
                <div id="carouselAdvert" class="carousel slide" data-ride="carousel" data-interval="false">
                    <ol class="carousel-indicators">
                        {% for photo in advert.servicephoto_set.all %}
                            <li data-target="#carouselAdvert" data-slide-to="{{ forloop.counter0 }}"
                                {% if forloop.first %}
                                    class="active"
                                {% endif %}
                            ></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner">
                        {% for photo in advert.servicephoto_set.all %}
                            <div
                                    {% if forloop.first %}
                                        class="carousel-item active"
                                    {% else %}
                                        class="carousel-item"
                                    {% endif %}
                            >
                                <img src="{{ photo|pad_image:'650,500' }}" class="d-block w-100" alt="...">
                            </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselAdvert" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                    </a>
                    <a class="carousel-control-next" href="#carouselAdvert" role="button" data-slide="next">
                        <span class="carousel-control-next-icon"></span>
                    </a>
                </div>
            {% else %}
                <div class="text-center">
                    <img src="{% static 'no_photo.jpg' %}" class="img-fluid">
                </div>
            {% endif %}
            <!-- –¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
            <div class="pl-2 pt-2">
                <h6>{{ advert.title }}</h6>
                <p class="text-muted">{{ advert.contact }}</p>
                <p style="word-wrap: break-word;">{{ advert.content|linebreaksbr }}</p>
                <div class="text-muted" style="">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ advert.created_date }}</div>
                <div class="text-muted" style="">–ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω: {{ advert.last_date }}</div>
                <div class="text-muted" style="">–ù–æ–º–µ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è: #{{ advert.id }}</div>
            </div>
        {% else %}
            <div class="alert alert-secondary text-center">
                –û–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω üòê
            </div>
        {% endif %}
    </div>

    <div class="pl-2" style="max-width: 650px">
        <p class="pl-2 py-2 bg-light normall blood-color">–ü–æ—Ö–æ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</p>
        {% for other_advert in other_adverts %}
            <div class="row no-gutters mb-4">
                <div class="col-2">
                    <img src="{{ other_advert.servicephoto_set.first|crop_image:'100,100' }}" width="100" height="100" class="img-fluid rounded open-js" />
                </div>
                <div class="col-10 pl-2">
                    <a href="{% url 'service_detail' pk=other_advert.id %}" class="text-black">{{ other_advert.title }}</a>
                    <div class="small2 text-muted">
                        <span class="mr-2">{{ other_advert.contact }}</span>
                    </div>
                    <div class="" style="word-wrap: break-word">
                    {{ other_advert.content|slice:"0:100" }}
                    <span class="d-none d-sm-inline">{{ other_advert.content|slice:"101:170" }}</span>
                    {% if other_advert.content|length > 150 %}...{% endif %}
                    <span class="continue-js text-muted d-sm-none"> –¥–∞–ª—å—à–µ</span>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}